(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const v of r.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const j=""+new URL("service-worker.62734ea8.js",import.meta.url).href;window.addEventListener("DOMContentLoaded",()=>{"serviceWorker"in window.navigator&&window.navigator.serviceWorker.register(j)},{once:!0});const h=(()=>{let e;async function t(){var s,n;e=await((n=(s=navigator.wakeLock)==null?void 0:s.request)==null?void 0:n.call(s,"screen"))}async function o(){!e||(await e.release(),e=void 0)}return{request:t,release:o}})(),E=new window.AudioContext,w=E.createGain();w.connect(E.destination);const m=(e,{volume:t=.25,duration:o=200}={volume:.25,duration:200})=>{const s=E.createOscillator();w.gain.value=t,s.connect(w),s.type="sine",s.frequency.value=e,s.start(),setTimeout(()=>s.stop(),o)},g={countdown:2500,set:1500,break:1e3,finish:1750},y=document.getElementById("app"),P=document.getElementById("set-display"),O=document.getElementById("main-display"),F=O.previousElementSibling,I=document.getElementById("sub-display"),H=I.previousElementSibling,k=document.getElementById("state-toggle"),N=document.getElementById("reset-button"),L=document.getElementById("duration-visualization").lastElementChild;function S(e){b(O,e)}function q(e){W(F,e)}function T(e){b(I,e)}function x(e){W(H,e)}function M(e){k.firstElementChild.setAttribute("href",`#${e}`)}function D(e){b(P,e)}function W(e,t){e.textContent=t}function b(e,t){e.value=t}const l=JSON.parse(localStorage.getItem("fitness-timer-settings"))||{durations:[90,15],numberOfSets:6},C=()=>localStorage.setItem("fitness-timer-settings",JSON.stringify(l)),u={get durations(){return l.durations},setDuration(e,t){l.durations[e]=t,C()},get numberOfSets(){return l.numberOfSets},set numberOfSets(e){l.numberOfSets=e,C()}},p=["Hussle","Chill"],$=["play","pause"],A=/^\d+$/;let d,c,i,a,U,B,V;window.addEventListener("DOMContentLoaded",()=>{K(),f()},{once:!0});y.addEventListener("focusin",({target:e})=>{!c&&e.tagName==="INPUT"&&e.select()});P.addEventListener("change",({target:{value:e}})=>{A.test(e)?(u.numberOfSets=Number(e),f()):D(u.numberOfSets)});O.addEventListener("change",({target:e})=>{G(Number(i),e)});I.addEventListener("change",({target:e})=>{G(Number(!i),e)});k.addEventListener("click",R);N.addEventListener("click",f);function K(){const e=L.getTotalLength(),t=e*.01;B=o=>{L.style.strokeDashoffset=`-${t*(100-o)}`},z(),L.style.strokeDasharray=e}function f(){c=!1,i=!1,d=u.numberOfSets,[a]=u.durations,J(),B(100),D(d),S(a),q(p[0]),T(u.durations[1]),x(p[1]),M($[0]),k.addEventListener("click",Q,{once:!0}),y.classList.remove("timer-is-running"),h.release(),N.classList.add("hidden")}function z(){V=u.durations.map(e=>e*.01)}function R(){c=!c,M($[Number(c)]),c?(U=setInterval(X,1e3),y.classList.add("timer-is-running"),h.request()):(J(),y.classList.remove("timer-is-running"),h.release())}function G(e,t){const{value:o}=t;A.test(o)?(u.setDuration(e,Number(o)),z(),f()):b(t,u.durations[e])}function Q(){m(g.set,{duration:600}),N.classList.remove("hidden")}function X(){a-=1;const e=a<=0;if(S(a),B(e?100:a/V[Number(i)]),e){if(i=!i,i||(d-=1),!d){m(g.finish,{duration:700}),f();return}a=u.durations[Number(i)],m(g[i?"break":"set"]),D(d),S(a),T(u.durations[Number(!i)]),q(p[Number(i)]),x(p[Number(!i)])}else a<10&&m(g.countdown,{volume:.25+(10-a)*1.3})}function J(){clearInterval(U)}
