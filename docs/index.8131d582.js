(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();(async()=>{if(!("wakeLock"in navigator&&"request"in navigator.wakeLock))return;const e=()=>navigator.wakeLock.request("screen");await e(),document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()})})();const J=""+new URL("service-worker.10050ce0.js",import.meta.url).href;window.addEventListener("DOMContentLoaded",()=>{"serviceWorker"in window.navigator&&window.navigator.serviceWorker.register(J)},{once:!0});const E=new window.AudioContext,h=E.createGain();h.connect(E.destination);const m=(e,{volume:t=.25,duration:a=200}={volume:.25,duration:200})=>{const u=E.createOscillator();h.gain.value=t,u.connect(h),u.type="sine",u.frequency.value=e,u.start(),setTimeout(()=>u.stop(),a)},g={countdown:2500,set:1500,break:1e3,finish:1750},y=document.getElementById("app"),C=document.getElementById("set-display"),S=document.getElementById("main-display"),j=S.previousElementSibling,k=document.getElementById("sub-display"),F=k.previousElementSibling,O=document.getElementById("state-toggle"),I=document.getElementById("reset-button"),L=document.getElementById("duration-visualization").lastElementChild;function w(e){v(S,e)}function P(e){M(j,e)}function T(e){v(k,e)}function q(e){M(F,e)}function x(e){O.firstElementChild.setAttribute("href",`#${e}`)}function N(e){v(C,e)}function M(e,t){e.textContent=t}function v(e,t){e.value=t}const l=JSON.parse(localStorage.getItem("fitness-timer-settings"))||{durations:[90,15],numberOfSets:6},B=()=>localStorage.setItem("fitness-timer-settings",JSON.stringify(l)),r={get durations(){return l.durations},setDuration(e,t){l.durations[e]=t,B()},get numberOfSets(){return l.numberOfSets},set numberOfSets(e){l.numberOfSets=e,B()}},b=["Hussle","Chill"],W=["play","pause"],$=/^\d+$/;let d,c,s,o,A,D,U;window.addEventListener("DOMContentLoaded",()=>{H(),f()},{once:!0});y.addEventListener("focusin",({target:e})=>{!c&&e.tagName==="INPUT"&&e.select()});C.addEventListener("change",({target:{value:e}})=>{$.test(e)?(r.numberOfSets=Number(e),f()):N(r.numberOfSets)});S.addEventListener("change",({target:e})=>{z(Number(s),e)});k.addEventListener("change",({target:e})=>{z(Number(!s),e)});O.addEventListener("click",K);I.addEventListener("click",f);function H(){const e=L.getTotalLength(),t=e*.01;D=a=>{L.style.strokeDashoffset=`-${t*(100-a)}`},V(),L.style.strokeDasharray=e}function f(){c=!1,s=!1,d=r.numberOfSets,[o]=r.durations,G(),D(100),N(d),w(o),P(b[0]),T(r.durations[1]),q(b[1]),x(W[0]),O.addEventListener("click",R,{once:!0}),y.classList.remove("timer-is-running"),I.classList.add("hidden")}function V(){U=r.durations.map(e=>e*.01)}function K(){c=!c,x(W[Number(c)]),c?(A=setInterval(Q,1e3),y.classList.add("timer-is-running")):(G(),y.classList.remove("timer-is-running"))}function z(e,t){const{value:a}=t;$.test(a)?(r.setDuration(e,Number(a)),V(),f()):v(t,r.durations[e])}function R(){m(g.set,{duration:600}),I.classList.remove("hidden")}function Q(){o-=1;const e=o<=0;if(w(o),D(e?100:o/U[Number(s)]),e){if(s=!s,s||(d-=1),!d){m(g.finish,{duration:700}),f();return}o=r.durations[Number(s)],m(g[s?"break":"set"]),N(d),w(o),T(r.durations[Number(!s)]),P(b[Number(s)]),q(b[Number(!s)])}else o<10&&m(g.countdown,{volume:.25+(10-o)*1.3})}function G(){clearInterval(A)}
