(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();(async()=>{if(!("wakeLock"in navigator&&"request"in navigator.wakeLock))return;const e=()=>navigator.wakeLock.request("screen");await e(),document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()})})();const j=""+new URL("service-worker.a90cb4d4.js",import.meta.url).href;window.addEventListener("DOMContentLoaded",()=>{"serviceWorker"in window.navigator&&window.navigator.serviceWorker.register(j)},{once:!0});const E=new window.AudioContext,h=E.createGain();h.connect(E.destination);const m=(e,{volume:t=.25,duration:a=200}={volume:.25,duration:200})=>{const c=E.createOscillator();h.gain.value=t,c.connect(h),c.type="sine",c.frequency.value=e,c.start(),setTimeout(()=>c.stop(),a)},g={countdown:2500,set:1500,break:1e3,finish:1750},y=document.getElementById("app"),C=document.getElementById("set-display"),S=document.getElementById("main-display"),F=S.previousElementSibling,k=document.getElementById("sub-display"),H=k.previousElementSibling,O=document.getElementById("state-toggle"),I=document.getElementById("reset-button"),L=document.getElementById("duration-visualization").lastElementChild;function w(e){v(S,e)}function P(e){M(F,e)}function T(e){v(k,e)}function q(e){M(H,e)}function x(e){O.firstElementChild.setAttribute("href",`#${e}`)}function D(e){v(C,e)}function M(e,t){e.textContent=t}function v(e,t){e.value=t}const l=JSON.parse(localStorage.getItem("fitness-timer-settings"))||{durations:[90,15],numberOfSets:6},B=()=>localStorage.setItem("fitness-timer-settings",JSON.stringify(l)),r={get durations(){return l.durations},setDuration(e,t){l.durations[e]=t,B()},get numberOfSets(){return l.numberOfSets},set numberOfSets(e){l.numberOfSets=e,B()}},b=["Hussle","Chill"],W=["play","pause"],$=/^\d+$/;let d,u,s,o,A,N,U;window.addEventListener("DOMContentLoaded",()=>{K(),f()},{once:!0});y.addEventListener("focusin",({target:e})=>{e.tagName==="INPUT"&&(u&&z(),e.select())});C.addEventListener("change",({target:{value:e}})=>{$.test(e)?(r.numberOfSets=+e,f()):D(r.numberOfSets)});S.addEventListener("change",({target:e})=>{G(Number(s),e)});k.addEventListener("change",({target:e})=>{G(Number(!s),e)});O.addEventListener("click",z);I.addEventListener("click",f);function K(){const e=L.getTotalLength(),t=e*.01;N=a=>{L.style.strokeDashoffset=`-${t*(100-a)}`},V(),L.style.strokeDasharray=e}function f(){u=!1,s=!1,d=r.numberOfSets,[o]=r.durations,J(),N(100),D(d),w(o),P(b[0]),T(r.durations[1]),q(b[1]),x(W[0]),O.addEventListener("click",R,{once:!0}),y.classList.remove("timer-is-running"),I.classList.add("hidden")}function V(){U=r.durations.map(e=>e*.01)}function z(){u=!u,x(W[Number(u)]),u?(Q(),y.classList.add("timer-is-running")):(J(),y.classList.remove("timer-is-running"))}function G(e,t){const{value:a}=t;$.test(a)?(r.setDuration(e,+a),V(),f()):v(t,r.durations[e])}function R(){m(g.set,{duration:600}),I.classList.remove("hidden")}function Q(){A=setInterval(X,1e3)}function X(){o-=1;const e=o<=0;if(w(o),N(e?100:o/U[Number(s)]),e){if(s=!s,s||(d-=1),!d){m(g.finish,{duration:700}),f();return}o=r.durations[Number(s)],m(g[s?"break":"set"]),D(d),w(o),T(r.durations[Number(!s)]),P(b[Number(s)]),q(b[Number(!s)])}else o<10&&m(g.countdown,{volume:.25+(10-o)*1.3})}function J(){clearInterval(A)}
